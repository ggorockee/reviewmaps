# 광고 수익 최적화 전략

## 📊 구현된 광고 유형

### 1. 전면광고 (Interstitial Ad) ✅
**위치**: 앱 시작 시 (SplashScreen)
- **타이밍**: 스플래시 화면 2초 후 + 4초 지연 = 총 6초 후 표시
- **정책 준수**: ✅ Google/Apple 정책상 안전 (3초 이상 지연)
- **빈도**: 세션당 1회만 표시
- **파일**: `lib/screens/splash_screen.dart:82-90`

**정책적 안전성**:
- ✅ 사용자가 앱을 충분히 인지한 후 표시
- ✅ 자연스러운 화면 전환 시점
- ✅ 건너뛰기 가능
- ✅ 앱 핵심 기능 방해하지 않음

### 2. 배너광고 (Banner Ad) ✅
**위치**: 홈화면 상단
- **크기**: 표준 배너 (320x50)
- **위치**: 콘텐츠 최상단 (검색 바 아래)
- **파일**: `lib/ads/banner.dart`, `lib/screens/home_screen.dart:482`

**정책적 안전성**:
- ✅ 콘텐츠와 명확히 구분
- ✅ 실수 클릭 유도하지 않는 위치
- ✅ 콘텐츠를 가리지 않음

### 3. 네이티브 광고 (Native Ad) ✅ **신규 추가**
**위치**: 홈화면 추천 리스트 내부
- **빈도**: 10개 체험단 카드마다 1개 삽입
- **레이아웃**: 리스트 아이템과 유사한 디자인
- **파일**: `lib/widgets/native_ad_widget.dart`, `lib/screens/home_screen.dart:780-848`

**정책적 안전성**:
- ✅ "광고" 라벨 명확히 표시 (아이콘 + 텍스트)
- ✅ 자연스러운 콘텐츠 흐름 유지
- ✅ 콘텐츠로 위장하지 않음
- ✅ 사용자 흐름 방해 최소화

### 4. 종료 시 광고: 리워드 광고 (Rewarded Ad) ❌ **비활성화**
**상태**: 비활성화됨 (2025년 1월)
- **사유**: 현재 사용하지 않음, 향후 필요 시 재활성화 가능
- **파일**: `lib/screens/main_screen.dart:88-108` (주석 처리)
- **관련 파일**:
  - `lib/widgets/exit_reward_dialog.dart` (보존)
  - `lib/ads/rewarded_ad_service.dart` (보존)

**재활성화 시 고려사항**:
- ✅ 사용자 선택권 제공 (강제하지 않음)
- ✅ 정책상 안전한 구현
- ❌ 네이티브 광고로 대체는 위험 (앱 리젝 가능성 높음)

## 🎯 수익 최적화 전략

### 광고 배치 우선순위
1. **eCPM 높음** → 네이티브 광고 (홈화면 리스트)
2. **노출 빈도 높음** → 배너광고 (홈화면 상단)
3. **단가 높음** → 전면광고 (앱 시작)
~~4. **사용자 친화적** → 리워드 광고 (종료 시)~~ ← **비활성화됨**

### 광고 로딩 전략
- 전면광고: 앱 시작 시 미리 로드
- 배너광고: 화면 진입 시 로드
- 네이티브 광고: 리스트 스크롤 시 동적 로드
- 로딩 실패 시 자동 재시도 (5초 후)

### 디버그/릴리즈 자동 전환
- **디버그 빌드**: 테스트 광고 ID 사용 (kDebugMode)
- **릴리즈 빌드**: 실제 광고 ID 사용
- **파일**: `lib/services/ad_service.dart:133-135`

## ⚠️ 정책 위반 방지 체크리스트

### ✅ 준수 사항
- [x] 앱 시작 3초 이상 지연 후 전면광고
- [x] 광고와 콘텐츠 명확히 구분
- [x] 네이티브 광고에 "광고" 라벨 표시
- [x] 사용자 흐름 방해 최소화
- [x] 종료 프로세스 차단하지 않음
- [x] 광고 건너뛰기 가능
- [x] 실수 클릭 유도하지 않음

### ❌ 금지 사항
- [ ] 앱 실행 즉시 전면광고 (0-2초)
- [ ] 광고 라벨 숨기기
- [ ] 콘텐츠로 위장
- [ ] 뒤로가기 버튼 차단
- [ ] 필수 UI 요소 가리기
- [ ] 과도한 광고 빈도

## 📈 추가 수익화 기회 (향후 검토)

### 안전하게 추가 가능한 광고
1. **지도 화면 하단 배너**
   - 매장 리스트 아래 배너 추가
   - 정책상 안전

2. **검색 결과 리스트 네이티브 광고**
   - 검색 결과 5~10개마다 삽입
   - 관련성 높은 광고 표시

3. **캠페인 상세 화면 네이티브 광고**
   - 상세 정보 하단에 추가 콘텐츠로 표시
   - 정책상 안전

### ⚠️ 위험한 광고 (권장하지 않음)
1. **종료 시 네이티브 광고** → 앱 리젝 위험 매우 높음
2. **전면광고 빈도 증가** → 사용자 이탈 위험
3. **광고 비율 > 콘텐츠 비율** → 정책 위반 위험

## 🔧 기술적 개선 사항

### 완료된 개선
- [x] kDebugMode 자동 감지로 테스트/실제 광고 전환
- [x] 네이티브 광고 위젯 컴포넌트화
- [x] 광고 로딩 실패 처리 및 로깅
- [x] Firebase Analytics 통합 (광고 이벤트 추적)

### 향후 개선 방향
- [ ] 광고 새로고침 간격 최적화
- [ ] 광고 로딩 실패 시 재시도 로직 강화
- [ ] 광고 클릭률(CTR) 분석 및 최적화
- [ ] A/B 테스트 (광고 위치별 eCPM 비교)

## 📝 주의사항

### 앱 심사 전 체크리스트
1. [ ] 릴리즈 빌드에서 실제 광고 ID 사용 확인
2. [ ] 모든 광고에 "광고" 라벨 표시 확인
3. [ ] 전면광고 지연 시간(4초) 확인
4. [ ] 뒤로가기 버튼 정상 작동 확인
5. [ ] 광고 로딩 실패 시 앱 정상 동작 확인

### 모니터링 항목
- 전면광고 노출/클릭률
- 배너광고 노출/클릭률
- 네이티브 광고 노출/클릭률
- 광고 로딩 실패율
- 사용자 이탈률 (광고 추가 전후 비교)

## 📊 예상 수익 개선

### 기존 (광고 부족)
- 전면광고: 초기화만 됨, 실제 표시 안됨
- 배너광고: 홈화면만
- 네이티브 광고: 없음

### 개선 후 (정책 준수 최적화)
- 전면광고: 세션당 1회 표시 ✅
- 배너광고: 홈화면 유지 ✅
- 네이티브 광고: 10개마다 1회 표시 ✅
- ~~리워드 광고: 종료 시 선택적 표시~~ ❌ **비활성화**

**예상 수익 증가**: 200-300% (네이티브 광고 추가로)

## 🚀 배포 전 최종 확인

```bash
# 1. 린트 검사
flutter analyze

# 2. 빌드 테스트
flutter build apk --release  # Android
flutter build ios --release  # iOS

# 3. 광고 동작 확인
# - 앱 시작 6초 후 전면광고 표시
# - 홈화면 상단 배너광고 표시
# - 스크롤 시 네이티브 광고 10개마다 표시
# - 뒤로가기 버튼으로 앱 즉시 종료 (리워드 광고 비활성화)
```

## 📚 관련 파일

### 광고 서비스
- `lib/services/ad_service.dart` - AdMob 통합 서비스
- `lib/services/interstitial_ad_manager.dart` - 전면광고 매니저

### 광고 위젯
- `lib/ads/banner.dart` - 배너광고 위젯
- `lib/widgets/native_ad_widget.dart` - 네이티브 광고 위젯 (신규)
- ~~`lib/widgets/exit_reward_dialog.dart`~~ - 종료 시 리워드 광고 (비활성화)
- ~~`lib/ads/rewarded_ad_service.dart`~~ - 리워드 광고 서비스 (비활성화)

### 화면 통합
- `lib/screens/splash_screen.dart` - 전면광고 표시
- `lib/screens/home_screen.dart` - 배너 + 네이티브 광고
- `lib/screens/main_screen.dart` - ~~종료 시 리워드 광고~~ 비활성화됨

### 설정
- `lib/config/config.dart` - AdMob 광고 단위 ID
