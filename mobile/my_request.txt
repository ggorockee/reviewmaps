/sc:implement
mainìœ¼ë¡œ ìµœì‹ í™”í•´ì£¼ê³ ê³ 
ë‚˜ëŠ” Flutterë¡œ iOS/Android ì•±ì„ ê°œë°œ ì¤‘ì´ë©°, "ê°•ì œ/ê¶Œì¥ ì—…ë°ì´íŠ¸" ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ë ¤ê³  í•œë‹¤.

ì¤‘ìš”í•œ ì „ì œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤:

1. ìŠ¤í† ì–´ ë²„ì „ì€ ê³ ë ¤í•˜ì§€ ì•Šê³ , ë‚´ê°€ ì •ì˜í•œ "ë…¼ë¦¬ ë²„ì „(Logical Version)"ì„ ê¸°ì¤€ìœ¼ë¡œ ì—…ë°ì´íŠ¸ ì—¬ë¶€ë¥¼ íŒë‹¨í•œë‹¤.
2. ì•±ì€ ë°±ì—”ë“œì˜ ë‹¤ìŒ APIë¥¼ í†µí•´ ë²„ì „ ì •ì±…ì„ ì¡°íšŒí•œë‹¤:
   GET /v1/app-config/version?platform=ios|android
   ì‘ë‹µ ì˜ˆì‹œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤:

   {
     "latest_version": "1.4.0",
     "min_version": "1.3.0",
     "force_update": true,
     "store_url": "https://...",
     "message_title": "ì—…ë°ì´íŠ¸ ì•ˆë‚´",
     "message_body": "ë” ì•ˆì •ì ì¸ ì„œë¹„ìŠ¤ ì´ìš©ì„ ìœ„í•´ ìµœì‹  ë²„ì „ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•´ ì£¼ì„¸ìš”."
   }

3. í˜„ì¬ ì•±ì˜ ë…¼ë¦¬ ë²„ì „(Logical Version)ì€ ìƒìˆ˜ë¡œ ì£¼ì…í•œë‹¤. 2.0.0ë²„ì „ìœ¼ë¡œ
4. ì•± ë¡œì§:
   - current < min_version â†’ ê°•ì œ ì—…ë°ì´íŠ¸
   - current â‰¥ latest_version â†’ ì•ˆë‚´ ì—†ìŒ

ì´ì œ ë„ˆê°€ í•´ì•¼ í•  ì¼ì€ ë‹¤ìŒê³¼ ê°™ë‹¤:

1. Flutterì—ì„œ ë…¼ë¦¬ ë²„ì „(Logical Version)ì„ ê´€ë¦¬í•˜ëŠ” êµ¬ì¡°ë¥¼ ì„¤ê³„í•´ì¤˜.

2. API í˜¸ì¶œ â†’ version compare â†’ UI ë™ì‘ì˜ ì „ì²´ íë¦„ì„ ì œì•ˆí•´ì¤˜.
   - ë²„ì „ ë¹„êµ í—¬í¼ ë¡œì§(major/minor/patch)
   - í”Œë«í¼ êµ¬ë¶„: Platform.isIOS / Platform.isAndroid

3. UI ìš”êµ¬ì‚¬í•­(ë„¤ì´ë²„ ìŠ¤íƒ€ì¼ ì•ˆë‚´ ë¬¸êµ¬ í¬í•¨):
   - ê°•ì œ ì—…ë°ì´íŠ¸ í™”ë©´:
     - ì œëª©: "ì—…ë°ì´íŠ¸ ì•ˆë‚´"
     - ë‚´ìš©: "ìµœì‹  ë²„ì „ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•œ ë’¤ ì´ìš©í•´ ì£¼ì„¸ìš”."
     - ë©”ì¸ ë²„íŠ¼: "ì—…ë°ì´íŠ¸í•˜ê¸°"
   - ê¶Œì¥ ì—…ë°ì´íŠ¸:
     - ì œëª©: "ìƒˆ ë²„ì „ì´ ìˆì–´ìš”"
     - ë‚´ìš©: "ë” ë‚˜ì€ ì„œë¹„ìŠ¤ ì´ìš©ì„ ìœ„í•´ ì—…ë°ì´íŠ¸ë¥¼ ì¶”ì²œë“œë ¤ìš”."
     - ë²„íŠ¼: "ì—…ë°ì´íŠ¸í•˜ê¸° / ë‚˜ì¤‘ì—"

4. "ë‚˜ì¤‘ì—" ì„ íƒ ì‹œ ì¼ì • ê¸°ê°„(ì˜ˆ: 1~3ì¼) ë™ì•ˆ ë‹¤ì‹œ ë„ìš°ì§€ ì•ŠëŠ” ë¡œì§ì„ ì„¤ê³„í•´ì¤˜.

5. ì•± ì•„í‚¤í…ì²˜(Riverpod/Bloc/GetX ë“±)ì—ì„œ ì´ ê¸°ëŠ¥ì„ ì–´ë””ì— ë„£ìœ¼ë©´ ì¢‹ì€ì§€ ì„¤ëª…í•´ì¤˜.

6. ë§ˆì§€ë§‰ìœ¼ë¡œ ì „ì²´ êµ¬í˜„ ê°€ì´ë“œë¥¼ ë‹¨ê³„ë³„ë¡œ ì •ë¦¬í•´ì¤˜.

7. ë¬¸êµ¬ëŠ” ë„¤ì´ë²„ ìŠ¤íƒ€ì¼ë¡œ ê¹”ë”í•œ í•œê¸€ë¡œ, ì´ëª¨ì§€ëŠ” ì‚¬ìš©í•˜ì§€ ë§ê²ƒ

8. í˜„ì¬ ë²„ì „ì—ì„œ í…ŒìŠ¤íŠ¸ëŠ” ì•ˆë˜ë‹ˆ ê°œë°œì´ ì™„ë£Œë˜ë©´ feature ë¸Œëœì¹˜ ìƒì„± í›„ -> í‘¸ì‰¬ -> squarse and merge PRìƒì„± -> PR ìŠ¹ì¸ì§„í–‰í•´ì¤˜ì¤˜

/sc:implement
gitì„ mainìœ¼ë¡œ ìµœì‹ í™”
@docs/SIGNUP_REFACTORING_PLAN.mdì„ ë³´ê³  ê°œë°œì„ ì§„í–‰í• ê±°ì•¼ Phase1ë¶€í„° êµ¬í˜„í•˜ë„ë¡í•˜ì. 

gitì— ì»¤ë°‹ëŒ€ìƒì€ docs/í´ë”ë„ í¬í•¨ì´ì•¼ 


@/home/woohaen88/reviewmaps/serverì—ì„œ campaign endpointëŠ” ì§€ê¸ˆ ì„œë¹„ìŠ¤ ë˜ê³ ìˆë‹¤. ì´ê±´ ê±´ë“œë¦¬ì§€ ë§ì•„ì¤˜ì¤˜
1. APIë¥¼ ì¡°ì‚¬í•˜ê±°ë‚˜ ìˆ˜ì •í•  ë•Œ @/home/woohaen88/reviewmaps/serverë¥¼ ìˆ˜ì •í•  ì¼ì´ ìˆì„ê±°ì•¼ ê·¸ë ‡ê²Œ ë˜ë©´ 
git agentë¡œ feature ë¸Œëœì¹˜ë¥¼ ë”°ì£¼ê³  ì»¤ë°‹í•´ì¤˜ ê·¸ë¦¬ê³  ghë¡œ squarse and mergeë¡œ PRì„ ìŠ¹ì¸ê¹Œì§€ì§„í–‰í•´ì¤˜ 
 
2. @/home/woohaen88/reviewmaps/serverê°€ ìˆ˜ì •ì´ ë˜ê³  PRì´ ë˜ë©´ í˜„ì¬ í´ë”ì¸ @/home/woohaen88/reviewmaps/mobileì—¬ê¸°ì„œ stash -> pull -> ë‹¤ì‹œ ì ìš© í›„ ì‘ì—…ì„ ì´ì–´ë‚˜ê°€ì¤˜
@home/woohaen88/reviewmaps/mobile ì´ ìˆ˜ì •ë˜ë©´ git agentë¡œ feature ë¸Œëœì¹˜ë¥¼ ë”°ì£¼ê³  ì»¤ë°‹í•´ì¤˜ ê·¸ë¦¬ê³  ghë¡œ squarse and mergeë¡œ PRì„ ìŠ¹ì¸ê¹Œì§€ì§„í–‰í•´ì¤˜ 


ì´ í”„ë¡œì íŠ¸ì—ì„œëŠ” dartì™€ flutterê°€ ì„¤ì¹˜ë˜ì–´ìˆì§€ ì•Šì€ë° í•„ìš”í•˜ë©´ ì„¤ì¹˜í•´ì¤˜. ì—ë®¬ë ˆì´í„°ëŠ” ì—°ê²°ë˜ì–´ìˆì§€ ì•Šë‹¤.

git agentë¡œ feature ë¸Œëœì¹˜ë¥¼ ë”°ì£¼ê³  ì»¤ë°‹í•´ì¤˜ í‘¸ì‰¬ëŠ” í•˜ì§€ë§ì•„ì¤˜




/sc:document --seq --plan
íšŒì›ê°€ì…ì„ ìˆ˜ì •í• êº¼ì•¼
- ì´ë¦„ (Optional)
- Email (í•„ìˆ˜)
- ìƒë…„ì›ì¼ ì œê±°
- íœ´ëŒ€ì „í™” ì œê±°
- ë¹„ë°€ë²ˆí˜¸
- ë¹„ë°€ë²ˆí˜¸ í™•ì¸(ì´ê²Œ ìš”ì¦˜ ì‚¬ìš©í•˜ëŠ” ë¡œì§ì¸ê°€?)
- ê·¸ë¦¬ê³  ì´ë©”ì¼ ì¸ì¦ 6ìë¦¬ì…ë ¥í•œê²Œ ë˜‘ê°™ìœ¼ë©´ í™•ì¸í•´ì£¼ê³  ì¸ì¦í•˜ëŠ”ê±°
ë‚´ê°€ ë§í•œê²Œ ë­”ì§€ ì•Œì§€?
- @docs/ì— ë¬¸ì„œë¡œ ê³„íšì„ ì‘ì„±í•˜ê³  ë‚˜í•œí…Œ ì»¨íŒë°›ì•„ 
- @/home/woohaen88/reviewmaps/serverê°€ ìˆ˜ì •ë ìˆ˜ë„ìˆìŒ

ì¼ë‹¨ ë¬¸ì„œë¶€í„° ì‘ì„±í•´ì¤˜







ìë™ í† í° ê°±ì‹  ë¡œì§ ì¶”ê°€ (Flutter)

// API í˜¸ì¶œ ì‹œ í† í° ë§Œë£Œ 5ë¶„ ì „ ìë™ ê°±ì‹ 
Future<String?> getValidAccessToken() async {
  final token = await getAccessToken();
  if (token == null) return null;

  final payload = _decodeJwtPayload(token);
  final exp = payload?['exp'] as int?;
  if (exp == null) return token;

  final expDate = DateTime.fromMillisecondsSinceEpoch(exp * 1000);
  final refreshThreshold = expDate.subtract(Duration(minutes: 5));

  if (DateTime.now().isAfter(refreshThreshold)) {
    // ë§Œë£Œ 5ë¶„ ì „ì´ë©´ ë¯¸ë¦¬ ê°±ì‹ 
    await refreshToken();
    return await getAccessToken();
  }

  return token;
}

í•˜ë“œì½”ë”©ì€ ì—†ì• ê³  ì „ë¶€ django apië¥¼ í†µí•´ í•´ê²°í• ìˆ˜ìˆë„ë¡ --> django adminì„ í†µí•œ ìœ ì—°ì„±í™•ë³´ë³´
ì•Œë¦¼ íˆìŠ¤í† ë¦¬ëŠ” 30ì¼ ë™ì•ˆ ìœ ì§€í•˜ë„ë¡í•˜ê³  
í‚¤ì›Œë“œì•ŒëŒì€ ìµœëŒ€ 20ê°œ 
















# ReviewMaps ì•± í’ˆì§ˆ ê°œì„  ê³„íšì„œ

## ë¬¸ì„œ ê°œìš”

- **ì‘ì„±ì¼**: 2025-11-26
- **ëª©ì **: ì•±ì˜ ì™„ì„±ë„ í–¥ìƒì„ ìœ„í•œ ë¶„ì„ ë° ê°œì„  ê³„íš
- **ë²”ìœ„**: ë¡œê·¸ì¸ ì„¸ì…˜ ê´€ë¦¬, ì•Œë¦¼ íˆìŠ¤í† ë¦¬ ê´€ë¦¬, ì „ë°˜ì ì¸ ì•± í’ˆì§ˆ

---

## 1. ë¡œê·¸ì¸ ì„¸ì…˜ ê´€ë¦¬ ë¶„ì„

### 1.1 í˜„ì¬ êµ¬í˜„ ìƒíƒœ

**ì„œë²„ ì¸¡ (Django)**
| ì„¤ì • í•­ëª© | í˜„ì¬ ê°’ | ìœ„ì¹˜ |
|-----------|---------|------|
| Access Token ë§Œë£Œ | 60ë¶„ | `config/settings.py` |
| Refresh Token ë§Œë£Œ | 7ì¼ | `config/settings.py` |
| ìµëª… ì„¸ì…˜ ë§Œë£Œ | 60ì‹œê°„ | `config/settings.py` |
| JWT ì•Œê³ ë¦¬ì¦˜ | HS256 | `config/settings.py` |

**ëª¨ë°”ì¼ ì¸¡ (Flutter)**
- í† í° ì €ì¥: `SharedPreferences` ì‚¬ìš©
- ì €ì¥ í•­ëª©: `access_token`, `refresh_token`, `session_token`, `is_anonymous`
- í† í° ê°±ì‹ : 401 ì‘ë‹µ ì‹œ `refresh_token`ìœ¼ë¡œ ê°±ì‹  ì‹œë„

### 1.2 ì—…ê³„ Best Practice (2024-2025 ê¸°ì¤€)

**ê¶Œì¥ í† í° ë§Œë£Œ ì‹œê°„**

| í† í° ìœ í˜• | ê¶Œì¥ ì‹œê°„ | ê·¼ê±° |
|-----------|-----------|------|
| Access Token | 5-15ë¶„ | íƒˆì·¨ ì‹œ í”¼í•´ ìµœì†Œí™” |
| Refresh Token | 7-30ì¼ | ëª¨ë°”ì¼ ì•± UX ê³ ë ¤ |
| API Token | 1ì‹œê°„ | ì„œë²„ê°„ í†µì‹ ìš© |
| SSO Token | 8ì‹œê°„ | ì—…ë¬´ ì‹œê°„ ê¸°ì¤€ |

**ì°¸ê³  ìë£Œ**:
- [JWT Security Best Practices for 2025](https://jwt.app/blog/jwt-best-practices/)
- [Token Best Practices - Auth0](https://auth0.com/docs/secure/tokens/token-best-practices/)
- [JWT Best Practices for Web & Mobile Apps](https://duendesoftware.com/learn/best-practices-using-jwts-with-web-and-mobile-apps)

### 1.3 í˜„ì¬ êµ¬í˜„ í‰ê°€

**ê°•ì **:
1. Access/Refresh í† í° ë¶„ë¦¬ êµ¬í˜„ âœ…
2. Refresh Token 7ì¼ì€ ëª¨ë°”ì¼ ì•± UXì— ì í•© âœ…
3. í† í° íƒ€ì… êµ¬ë¶„ (`type: 'access'|'refresh'|'anonymous'`) âœ…

**ê°œì„  í•„ìš”**:
1. âš ï¸ Access Token 60ë¶„ì€ ë‹¤ì†Œ ê¹€ (ê¶Œì¥: 15ë¶„)
2. âš ï¸ SharedPreferencesëŠ” ì•ˆì „í•˜ì§€ ì•ŠìŒ (ê¶Œì¥: Keychain/Keystore)
3. âš ï¸ Refresh Token Rotation ë¯¸êµ¬í˜„ (íƒˆì·¨ ê°ì§€ ë¶ˆê°€)
4. âš ï¸ í† í° ê°±ì‹  ìë™í™” ë¡œì§ ë¶€ì¬ (ë§Œë£Œ ì „ ë¯¸ë¦¬ ê°±ì‹ )

### 1.4 ê°œì„  ê¶Œì¥ì‚¬í•­

#### 1.4.1 ë‹¨ê¸° ê°œì„  (ê¶Œì¥)

**A. Access Token ë§Œë£Œ ì‹œê°„ ë‹¨ì¶•**
```python
# config/settings.py
JWT_ACCESS_TOKEN_EXPIRE_MINUTES = 15  # 60 â†’ 15
```
- íš¨ê³¼: í† í° íƒˆì·¨ ì‹œ í”¼í•´ ì‹œê°„ 75% ê°ì†Œ
- ë¶€ì‘ìš©: í† í° ê°±ì‹  ë¹ˆë„ ì¦ê°€ â†’ Refresh ë¡œì§ ê°•í™” í•„ìš”

**B. ìë™ í† í° ê°±ì‹  ë¡œì§ ì¶”ê°€ (Flutter)**
```dart
// API í˜¸ì¶œ ì‹œ í† í° ë§Œë£Œ 5ë¶„ ì „ ìë™ ê°±ì‹ 
Future<String?> getValidAccessToken() async {
  final token = await getAccessToken();
  if (token == null) return null;

  final payload = _decodeJwtPayload(token);
  final exp = payload?['exp'] as int?;
  if (exp == null) return token;

  final expDate = DateTime.fromMillisecondsSinceEpoch(exp * 1000);
  final refreshThreshold = expDate.subtract(Duration(minutes: 5));

  if (DateTime.now().isAfter(refreshThreshold)) {
    // ë§Œë£Œ 5ë¶„ ì „ì´ë©´ ë¯¸ë¦¬ ê°±ì‹ 
    await refreshToken();
    return await getAccessToken();
  }

  return token;
}
```

#### 1.4.2 ì¤‘ê¸° ê°œì„  (ì„ íƒ)

**A. ë³´ì•ˆ ì €ì¥ì†Œ ì‚¬ìš©**
- iOS: Keychain (`flutter_secure_storage`)
- Android: Keystore (`flutter_secure_storage`)

**B. Refresh Token Rotation**
- Refresh í† í° ì‚¬ìš© ì‹œ ìƒˆ Refresh í† í° ë°œê¸‰
- ì´ì „ í† í° ì¬ì‚¬ìš© ê°ì§€ â†’ ê³„ì • ì ê¸ˆ

#### 1.4.3 ì¥ê¸° ê°œì„  (ì„ íƒ)

**A. JWT ì•Œê³ ë¦¬ì¦˜ ì—…ê·¸ë ˆì´ë“œ**
- í˜„ì¬: HS256 (ëŒ€ì¹­í‚¤)
- ê¶Œì¥: ES256 ë˜ëŠ” EdDSA (ë¹„ëŒ€ì¹­í‚¤, ë” ì•ˆì „)

---

## 2. ì•Œë¦¼ íˆìŠ¤í† ë¦¬ ê´€ë¦¬ ì „ëµ

### 2.1 í˜„ì¬ êµ¬í˜„ ìƒíƒœ

**ë°ì´í„° ëª¨ë¸**
```
KeywordAlert (í‚¤ì›Œë“œ ì•Œë¦¼)
â”œâ”€â”€ keyword: FK â†’ Keyword (CASCADE)
â”œâ”€â”€ campaign: FK â†’ Campaign (CASCADE)
â”œâ”€â”€ matched_field: CharField
â”œâ”€â”€ is_read: BooleanField
â””â”€â”€ created_at: DateTimeField
```

**í˜„ì¬ ë™ì‘**:
- ìº í˜ì¸ ìƒì„± ì‹œ í‚¤ì›Œë“œ ë§¤ì¹­ â†’ ì•Œë¦¼ ìë™ ìƒì„±
- ìº í˜ì¸ ì‚­ì œ ì‹œ ì—°ê´€ ì•Œë¦¼ ìë™ ì‚­ì œ (`on_delete=CASCADE`)
- í‚¤ì›Œë“œ ì‚­ì œ ì‹œ ì—°ê´€ ì•Œë¦¼ ìë™ ì‚­ì œ (`on_delete=CASCADE`)
- **ì•Œë¦¼ ë³´ê´€ ê¸°ê°„ ì œí•œ ì—†ìŒ**
- **ì•Œë¦¼ ê°œìˆ˜ ì œí•œ ì—†ìŒ**

### 2.2 ë¬¸ì œì  ë¶„ì„

| ë¬¸ì œ | ì˜í–¥ | ì‹¬ê°ë„ |
|------|------|--------|
| ë¬´ì œí•œ ì•Œë¦¼ ì¶•ì  | DB ìš©ëŸ‰ ì¦ê°€, ì¡°íšŒ ì„±ëŠ¥ ì €í•˜ | ğŸŸ¡ ì¤‘ê°„ |
| ì˜¤ë˜ëœ ì•Œë¦¼ ë…¸ì¶œ | ì‚¬ìš©ì ê²½í—˜ ì €í•˜ (ì§€ë‚œ ìº í˜ì¸ ì•Œë¦¼) | ğŸŸ¢ ë‚®ìŒ |
| ëŒ€ëŸ‰ ì•Œë¦¼ ì‹œ ì„±ëŠ¥ | ëª©ë¡ ë¡œë”© ì§€ì—° | ğŸŸ¡ ì¤‘ê°„ |

### 2.3 ê¶Œì¥ ì „ëµ

#### 2.3.1 ì•Œë¦¼ ë³´ê´€ ê¸°ê°„

**ê¶Œì¥**: 30ì¼ ë³´ê´€ í›„ ìë™ ì‚­ì œ

**ê·¼ê±°**:
- ìº í˜ì¸ ì‹ ì²­ ë§ˆê°ì¼ì€ ë³´í†µ 7-14ì¼
- 30ì¼ì´ë©´ ì¶©ë¶„í•œ í™•ì¸ ì‹œê°„ ì œê³µ
- ì˜¤ë˜ëœ ì•Œë¦¼ì€ ì‚¬ìš©ìì—ê²Œ ê°€ì¹˜ ì—†ìŒ

**êµ¬í˜„ ë°©ì•ˆ**:
```python
# Django Management Command ë˜ëŠ” Celery Task
from datetime import timedelta
from django.utils import timezone

def cleanup_old_alerts():
    threshold = timezone.now() - timedelta(days=30)
    deleted_count, _ = KeywordAlert.objects.filter(
        created_at__lt=threshold
    ).delete()
    return deleted_count
```

#### 2.3.2 ì•Œë¦¼ ê°œìˆ˜ ì œí•œ

**ê¶Œì¥**: ì‚¬ìš©ìë‹¹ ìµœëŒ€ 100ê°œ ì•Œë¦¼

**êµ¬í˜„ ë°©ì•ˆ**:
```python
# ìƒˆ ì•Œë¦¼ ìƒì„± ì‹œ ì˜¤ë˜ëœ ì•Œë¦¼ ì •ë¦¬
MAX_ALERTS_PER_USER = 100

def create_alert_with_limit(keyword, campaign, matched_field):
    # í˜„ì¬ ì•Œë¦¼ ìˆ˜ í™•ì¸
    current_count = KeywordAlert.objects.filter(
        keyword__user=keyword.user
    ).count()

    # í•œë„ ì´ˆê³¼ ì‹œ ì˜¤ë˜ëœ ê²ƒë¶€í„° ì‚­ì œ
    if current_count >= MAX_ALERTS_PER_USER:
        excess = current_count - MAX_ALERTS_PER_USER + 1
        old_alerts = KeywordAlert.objects.filter(
            keyword__user=keyword.user
        ).order_by('created_at')[:excess]
        old_alerts.delete()

    # ìƒˆ ì•Œë¦¼ ìƒì„±
    return KeywordAlert.objects.create(
        keyword=keyword,
        campaign=campaign,
        matched_field=matched_field
    )
```

#### 2.3.3 ìº í˜ì¸ ì—°ë™ (Cascade Delete)

**í˜„ì¬ ìƒíƒœ**: âœ… ì´ë¯¸ ì˜¬ë°”ë¥´ê²Œ êµ¬í˜„ë¨
```python
campaign = models.ForeignKey(
    'campaigns.Campaign',
    on_delete=models.CASCADE,  # ìº í˜ì¸ ì‚­ì œ ì‹œ ì•Œë¦¼ë„ ì‚­ì œ
    ...
)
```

#### 2.3.4 AppSetting ê¸°ë°˜ ì„¤ì • ê´€ë¦¬

**ê¶Œì¥**: ìš´ì˜ ìœ ì—°ì„±ì„ ìœ„í•´ ì„¤ì •ê°’ì„ DBì—ì„œ ê´€ë¦¬

```python
# AppSettingì— ì¶”ê°€í•  ì„¤ì •
{
    "key": "alert_retention",
    "value": {
        "retention_days": 30,
        "max_alerts_per_user": 100,
        "cleanup_enabled": True
    },
    "is_active": True
}
```

### 2.4 êµ¬í˜„ ìš°ì„ ìˆœìœ„

| ìˆœìœ„ | í•­ëª© | ë‚œì´ë„ | íš¨ê³¼ |
|------|------|--------|------|
| 1 | 30ì¼ ìë™ ì •ë¦¬ | ë‚®ìŒ | ë†’ìŒ |
| 2 | ì‚¬ìš©ìë‹¹ 100ê°œ ì œí•œ | ì¤‘ê°„ | ì¤‘ê°„ |
| 3 | AppSetting ì—°ë™ | ë‚®ìŒ | ë†’ìŒ |

---

## 3. ì•± ì „ë°˜ í’ˆì§ˆ ì ê²€

### 3.1 ì•„í‚¤í…ì²˜ ë¶„ì„

**ê°•ì **:
- âœ… Riverpod ìƒíƒœê´€ë¦¬ ì˜ êµ¬ì„±ë¨
- âœ… ì„œë¹„ìŠ¤ ë ˆì´ì–´ ë¶„ë¦¬ (auth, campaign, keyword, fcm)
- âœ… Firebase í†µí•© ì˜ êµ¬í˜„ë¨ (Analytics, Crashlytics, Remote Config)
- âœ… ê´‘ê³  ì„œë¹„ìŠ¤ ëª¨ë“ˆí™” ìš°ìˆ˜

**ê°œì„  ê¸°íšŒ**:
- âš ï¸ ì—ëŸ¬ ì²˜ë¦¬ ì¼ê´€ì„± ê°œì„  í•„ìš”
- âš ï¸ ë„¤íŠ¸ì›Œí¬ ì¬ì‹œë„ ë¡œì§ ì—†ìŒ
- âš ï¸ ì˜¤í”„ë¼ì¸ ì§€ì› ì—†ìŒ

### 3.2 ë³´ì•ˆ ì ê²€

| í•­ëª© | í˜„ì¬ ìƒíƒœ | ê¶Œì¥ |
|------|-----------|------|
| í† í° ì €ì¥ | SharedPreferences | flutter_secure_storage |
| API í†µì‹  | HTTPS âœ… | ìœ ì§€ |
| ë¯¼ê°ì •ë³´ ë¡œê¹… | ì¼ë¶€ ë…¸ì¶œ | ì œê±° í•„ìš” |
| Certificate Pinning | ì—†ìŒ | ì„ íƒì  êµ¬í˜„ |

### 3.3 ì„±ëŠ¥ ìµœì í™” ê¸°íšŒ

**1. ì´ë¯¸ì§€ ìºì‹±**
- í˜„ì¬: ê¸°ë³¸ NetworkImage
- ê¶Œì¥: `cached_network_image` íŒ¨í‚¤ì§€ ì‚¬ìš©

**2. ëª©ë¡ í˜ì´ì§€ë„¤ì´ì…˜**
- í˜„ì¬: ì „ì²´ ëª©ë¡ ë¡œë”©
- ê¶Œì¥: ë¬´í•œ ìŠ¤í¬ë¡¤ + í˜ì´ì§€ë„¤ì´ì…˜

**3. API ì‘ë‹µ ìºì‹±**
- ìº í˜ì¸ ëª©ë¡ ë“± ìì£¼ ë³€ê²½ë˜ì§€ ì•ŠëŠ” ë°ì´í„° ìºì‹±

---

## 4. êµ¬í˜„ ë¡œë“œë§µ

### Phase 1: ì¦‰ì‹œ ê°œì„  (ì´ë²ˆ ìŠ¤í”„ë¦°íŠ¸)

1. **ë¬¸ì„œí™” ì™„ë£Œ** âœ…
   - í˜„ì¬ ë¬¸ì„œ

2. **í† í° ìë™ ê°±ì‹  ë¡œì§**
   - Access Token ë§Œë£Œ ì „ ìë™ ê°±ì‹ 
   - 401 ì—ëŸ¬ í•¸ë“¤ë§ ê°•í™”

### Phase 2: ë‹¨ê¸° ê°œì„  (1-2ì£¼)

1. **ì•Œë¦¼ ë³´ê´€ ê¸°ê°„ ì„¤ì •**
   - 30ì¼ ìë™ ì •ë¦¬ Cron Job/Celery Task
   - AppSetting ì—°ë™

2. **ì•Œë¦¼ ê°œìˆ˜ ì œí•œ**
   - ì‚¬ìš©ìë‹¹ 100ê°œ ì œí•œ ë¡œì§

### Phase 3: ì¤‘ê¸° ê°œì„  (1ê°œì›”)

1. **ë³´ì•ˆ ì €ì¥ì†Œ ë§ˆì´ê·¸ë ˆì´ì…˜**
   - flutter_secure_storage ë„ì…

2. **Access Token ë§Œë£Œ ì‹œê°„ ë‹¨ì¶•**
   - 60ë¶„ â†’ 15ë¶„
   - í´ë¼ì´ì–¸íŠ¸ í† í° ê°±ì‹  ë¡œì§ ì™„ì„± í›„ ì ìš©

### Phase 4: ì¥ê¸° ê°œì„  (ì„ íƒ)

1. **Refresh Token Rotation**
2. **JWT ì•Œê³ ë¦¬ì¦˜ ì—…ê·¸ë ˆì´ë“œ**
3. **ì˜¤í”„ë¼ì¸ ì§€ì›**

---

## 5. ì°¸ê³  ìë£Œ

### JWT ë³´ì•ˆ Best Practices
- [JWT Security Best Practices for 2025](https://jwt.app/blog/jwt-best-practices/)
- [Token Best Practices - Auth0](https://auth0.com/docs/secure/tokens/token-best-practices/)
- [JWT Best Practices for Web & Mobile Apps - Duende](https://duendesoftware.com/learn/best-practices-using-jwts-with-web-and-mobile-apps)
- [Token Expiry Best Practices - Zuplo](https://zuplo.com/blog/2025/03/01/token-expiry-best-practices)

### Stack Overflow í† ë¡ 
- [Shall JWT expires in mobile apps?](https://stackoverflow.com/questions/63999174/shall-jwt-expires-in-mobile-apps)
- [JWT automatic prolongation of expiration](https://stackoverflow.com/questions/26739167/jwt-json-web-token-automatic-prolongation-of-expiration)
- [Proper implementation of JWT in mobile app](https://security.stackexchange.com/questions/207775/proper-implementation-of-jwt-authentication-in-mobile-app)

---

## ë³€ê²½ ì´ë ¥

| ë²„ì „ | ë‚ ì§œ | ì‘ì„±ì | ë‚´ìš© |
|------|------|--------|------|
| 1.0 | 2025-11-26 | Claude | ì´ˆì•ˆ ì‘ì„± |
